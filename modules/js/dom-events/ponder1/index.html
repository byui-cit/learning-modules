<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM Events - Ponder</title>
    <meta name="description" content="Practice using DOM Events">
    <link rel="apple-touch-icon" sizes="180x180" href="/learning-modules/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/learning-modules/img/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/learning-modules/img/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="shortcut icon" href="/learning-modules/img/favicon/favicon.ico">
    <link rel="stylesheet" href="/learning-modules/css/index.css">
    <link rel="stylesheet" href="/learning-modules/css/prism-coy.css">
    <link rel="alternate" href="/learning-modules/feed/feed.xml" type="application/atom+xml" title="WDD Learning Modules">
    <link rel="alternate" href="/learning-modules/feed/feed.json" type="application/json" title="WDD Learning Modules">
  </head>
  <body>
    <header>
      <div class="branding">
        <a href="/learning-modules/">
          <img src="/learning-modules/img/TwoLineMonogram_white.svg" alt="BYU-I logo" class="logo">
        </a>
        <h1 class="vertical-text">WDD Learning Modules</h1>
      </div>
      <nav>
        <ul class="nav">
            <li class="nav-item">
              <a href="/learning-modules/">Home</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/html/">HTML</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/js/">JS</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/css/">CSS</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/design/">Design</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/general/">General</a>
            </li>
        </ul>
      </nav>
    </header>
    <main  class="tmpl-post" >
      
<h1>DOM Events - Ponder</h1>




<h2 id="preparation" tabindex="-1">Preparation <a class="direct-link" href="#preparation" aria-hidden="true">#</a></h2>
<p>This activity will walk us through building a simple To-do application that will allow you to add a task, mark a task as completed, and remove a task. It is recommended to review <a href="../prepare1">Event Driven Programmming</a> before you start.</p>
<p>You will need your editor open to create a couple of new files for the following code:</p>
<h3 id="html" tabindex="-1">html <a class="direct-link" href="#html" aria-hidden="true">#</a></h3>
<pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- events.html --></span><br><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Events practice: ToDos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token selector">.todos</span> <span class="token punctuation">{</span><br>        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos > li</span> <span class="token punctuation">{</span><br>        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>        <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span><br>        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span><br>        <span class="token property">padding</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos p</span> <span class="token punctuation">{</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos span</span> <span class="token punctuation">{</span><br>        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.strike</span> <span class="token punctuation">{</span><br>        <span class="token property">text-decoration</span><span class="token punctuation">:</span> line-through<span class="token punctuation">;</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>ToDos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Enter Task<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submitTask<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Enter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todoList<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todos<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<h3 id="javascript" tabindex="-1">Javascript <a class="direct-link" href="#javascript" aria-hidden="true">#</a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// events.js</span><br><span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">renderTasks</span><span class="token punctuation">(</span><span class="token parameter">tasks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the list element from the DOM</span><br>  <span class="token comment">// loop through the tasks array. transform (map) each task object into the appropriate HTML to represent a to-do.</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">newTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the value entered into the #todo input</span><br>  <span class="token comment">// add it to our arrays tasks</span><br>  <span class="token comment">// render out the list</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">removeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Note the use of Array.filter to remove the element from our task array</span><br>  <span class="token comment">// Notice also how we are using taskElement instead of document as our starting point?</span><br>  <span class="token comment">// This will restrict our search to the element instead of searching the whole document.</span><br>  tasks <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">!=</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// this line removes the HTML element from the DOM</span><br>  taskElement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">completeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// In this case we need to find the index of the task so we can modify it.</span><br>  <span class="token keyword">const</span> taskIndex <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">===</span> taskElement<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// once we have the index we can modify the complete field.</span><br>  <span class="token comment">// tasks[taskIndex].completed ? false : true is a ternary expression.</span><br>  <span class="token comment">// If the first part is true (left of the ?), then the value on the left of the : will get returned, otherwise the value on the right of the : will be returned.</span><br>  tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">=</span> tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  <span class="token comment">// toggle adds a class if it is not there, removes it if it is.</span><br>  taskElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"strike"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">manageTasks</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// did they click the delete or complete icon?</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// event.target will point to the actual icon clicked on. We need to get the parent li to work with however. HINT: Remember element.closest()? Look it up if you don't</span><br><br>  <span class="token comment">// because we added 'data-action="delete"' to each icon in a task we can access a dataset property on our target (e.target.dataset.action)</span><br>  <span class="token comment">// use that in a couple of if statements to decide whether to run removeTask or completeTask</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Add your event listeners here</span><br><span class="token comment">// We need to attach listeners to the submit button and the list. Listen for a click, call the 'newTask' function on submit and call the 'manageTasks' function if either of the icons are clicked in the list of tasks.</span></code></pre>
<p>These activities will be most effective if you TRY them first before you look at the solution. And after you do look at the solution...DO NOT copy and paste the code. Read through it, try to understand what it is doing...then go fix your code.</p>
<h2 id="activity-1" tabindex="-1">Activity 1 <a class="direct-link" href="#activity-1" aria-hidden="true">#</a></h2>
<p>There are 3 functions to be written, and some events to listen for to complete this simple Todo list application. Begin by reviewing the code you were given. Pay attention to the comments!  Also don't forget to check for errors after each step!</p>
<ol>
<li>
<p>Start with the <code>newTask</code> function. Get the value entered in the '#todo' input, then add it to the <code>tasks</code> array, and finally call the <code>renderTasks</code> function.</p>
<p>We need to store two bits of information about each task. The details of the task, and whether or not it has been completed. The best way to do this is with a list of Objects. Each task would have the following format:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span> detail<span class="token operator">:</span> task<span class="token punctuation">,</span> completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span></code></pre>
</li>
<li>
<p>After completing that attach an event listener to the '#submitTask' button that will call the <code>newTask</code> function when it is clicked.</p>
</li>
<li>
<p>After making sure that it is working, complete the <code>renderTasks</code> function next. You can use the following for the markup for each task:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">'class="strike"'</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>   &lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>detail<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p><br>   &lt;div><br>     &lt;span data-function="delete">❎&lt;/span><br>     &lt;span data-function="complete">✅&lt;/span><br>   &lt;/div><br> &lt;/li></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre>
</li>
<li>
<p>Finally we can write the <code>manageTasks()</code> function. When someone clicks the ❎ it should call the <code>removeTask()</code> function. If they click the ✅ then the <code>completeTask()</code> should be called.</p>
</li>
</ol>
<div class="callout">
<p>One way to approach this would be to attach a listener to each button for each task. But if we up with many tasks that is a lot of listeners to keep track of. Instead we can take advantage of <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#event_delegation">Event Delegation</a>.</p>
<p>If we click on one of the icons the event will 'bubble' up to the list item and look for an event listener there. It will then bubble up to the UL and look for a listener there...so we could simply attach one listener to the parent UL ('#todoList') to catch any click in our list!</p>
<p>One problem though...how do we know which button on which task was clicked? <code>event.currentTarget</code> always contains a reference to the element the listener is attached to. <code>event.target</code> always references the element that triggered the event! (the element clicked on in this case)</p>
<p>If you look at the HTML you were provided for a task you will see <code>data-action=&quot;delete&quot;</code> on the delete icon. This is a custom HTML attribute. The <code>data-</code> is significant, but the <code>action</code> could have been anything we wanted. Because we used that preface the browser will package that up for us making it easy to access. If we inspect <code>event.target.dataset.action</code> should see either 'delete' or 'complete' depending on which icon was clicked. Those we can use in if statements to decide which function to call: <code>removeTask()</code> or <code>completeTask()</code></p>
 </div>
<details>
<summary>Solution 1</summary>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">taskTemplate</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;li </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">'class="strike"'</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>      &lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>detail<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p><br>      &lt;div><br>        &lt;span data-function="delete">❎&lt;/span><br>        &lt;span data-function="complete">✅&lt;/span><br>      &lt;/div><br>    &lt;/li></span><span class="token template-punctuation string">`</span></span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">renderTasks</span><span class="token punctuation">(</span><span class="token parameter">tasks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the list element from the DOM</span><br>  <span class="token keyword">const</span> listElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todoList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  listElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token comment">// loop through the tasks array. transform (map) each task object into the appropriate HTML to represent a to-do.</span><br>  <span class="token keyword">const</span> html <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>taskTemplate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  listElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">newTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the value entered into the #todo input</span><br>  <span class="token keyword">const</span> task <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token comment">// add it to our arrays tasks</span><br>  tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> detail<span class="token operator">:</span> task<span class="token punctuation">,</span> completed<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// render out the list</span><br>  <span class="token function">renderTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">removeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Notice how we are using taskElement instead of document as our starting point?</span><br>  <span class="token comment">// This will restrict our search to the element instead of searching the whole document.</span><br>  tasks <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">!=</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  taskElement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">completeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> taskIndex <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">===</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">=</span> tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  taskElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"strike"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">manageTasks</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// did they click the delete or complete icon?</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> parent <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">"delete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">removeTask</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">completeTask</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Add your event listeners here</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#submitTask"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> newTask<span class="token punctuation">)</span><span class="token punctuation">;</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todoList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> manageTasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// render  the initial list of tasks (if any) when the page loads</span><br><span class="token function">renderTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</details>

</main>
    <footer>
      <p class="license">
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"/> </a><br/>This work is licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0
          International License</a>.</p>
    </footer><!-- Current page: /learning-modules/modules/js/dom-events/ponder1/ --></body>
</html>