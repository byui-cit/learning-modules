<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localStorage - Ponder</title>
    <meta name="description" content="Practice using localStorage">
    <link rel="apple-touch-icon" sizes="180x180" href="/learning-modules/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/learning-modules/img/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/learning-modules/img/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="shortcut icon" href="/learning-modules/img/favicon/favicon.ico">
    <link rel="stylesheet" href="/learning-modules/css/index.css">
    <link rel="stylesheet" href="/learning-modules/css/prism-coy.css">
    <link rel="alternate" href="/learning-modules/feed/feed.xml" type="application/atom+xml" title="WDD Learning Modules">
    <link rel="alternate" href="/learning-modules/feed/feed.json" type="application/json" title="WDD Learning Modules">
  </head>
  <body>
    <header>
      <div class="branding">
        <a href="/learning-modules/">
          <img src="/learning-modules/img/TwoLineMonogram_white.svg" alt="BYU-I logo" class="logo">
        </a>
        <h1 class="vertical-text">WDD Learning Modules</h1>
      </div>
      <nav>
        <ul class="nav">
            <li class="nav-item">
              <a href="/learning-modules/">Home</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/html/">HTML</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/js/">JS</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/css/">CSS</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/design/">Design</a>
            </li>
            <li class="nav-item">
              <a href="/learning-modules/modules/general/">General</a>
            </li>
        </ul>
      </nav>
    </header>
    <main  class="tmpl-post" >
      
<h1>localStorage - Ponder</h1>




<h2 id="preparation" tabindex="-1">Preparation <a class="direct-link" href="#preparation" aria-hidden="true">#</a></h2>
<p>For this activity you are given the code for a simple To-do application that will allow you to add a task, mark a task as completed, and remove a task. The problem is that if you refresh the browser all your tasks will disappear. Not ideal. We will modify the code to use localStorage to store the tasks for us. It is recommended to review <a href="../prepare1">Introduction to localStorage</a> before you start.</p>
<p>You will need your editor open to create a couple of new files for the following code:</p>
<h3 id="html" tabindex="-1">html <a class="direct-link" href="#html" aria-hidden="true">#</a></h3>
<pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- storage.html --></span><br><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>localStorage practice: ToDos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>storage.js<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token selector">header</span> <span class="token punctuation">{</span><br>        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>        <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos</span> <span class="token punctuation">{</span><br>        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos > li</span> <span class="token punctuation">{</span><br>        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>        <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span><br>        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span><br>        <span class="token property">padding</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos p</span> <span class="token punctuation">{</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.todos span</span> <span class="token punctuation">{</span><br>        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">.strike</span> <span class="token punctuation">{</span><br>        <span class="token property">text-decoration</span><span class="token punctuation">:</span> line-through<span class="token punctuation">;</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>ToDos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>[user name here]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Enter Task<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submitTask<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Enter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todoList<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todos<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<h3 id="javascript" tabindex="-1">Javascript <a class="direct-link" href="#javascript" aria-hidden="true">#</a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// storage.js</span><br><span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">taskTemplate</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;li </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">'class="strike"'</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>      &lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>detail<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p><br>      &lt;div><br>        &lt;span data-action="delete">❎&lt;/span><br>        &lt;span data-action="complete">✅&lt;/span><br>      &lt;/div><br>    &lt;/li></span><span class="token template-punctuation string">`</span></span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">renderTasks</span><span class="token punctuation">(</span><span class="token parameter">tasks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the list element from the DOM</span><br>  <span class="token keyword">const</span> listElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todoList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  listElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token comment">// loop through the tasks array. transform (map) each task object into the appropriate HTML to represent a to-do.</span><br>  <span class="token keyword">const</span> html <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>taskTemplate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  listElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">newTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the value entered into the #todo input</span><br>  <span class="token keyword">const</span> task <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token comment">// add it to our arrays tasks</span><br>  tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> detail<span class="token operator">:</span> task<span class="token punctuation">,</span> completed<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// render out the list</span><br>  <span class="token function">renderTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">removeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Notice how we are using taskElement instead of document as our starting point?</span><br>  <span class="token comment">// This will restrict our search to the element instead of searching the whole document.</span><br>  tasks <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">!=</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  taskElement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">completeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> taskIndex <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">===</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">=</span> tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  taskElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"strike"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">manageTasks</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// did they click the delete or complete icon?</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> parent <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">"delete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">removeTask</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">completeTask</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Add your event listeners here</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#submitTask"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> newTask<span class="token punctuation">)</span><span class="token punctuation">;</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todoList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> manageTasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// render  the initial list of tasks (if any) when the page loads</span><br><span class="token function">renderTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>These activities will be most effective if you TRY them first before you look at the solution. And after you do look at the solution...DO NOT copy and paste the code. Read through it, try to understand what it is doing...then go fix your code.</p>
<h2 id="activity-1" tabindex="-1">Activity 1 <a class="direct-link" href="#activity-1" aria-hidden="true">#</a></h2>
<p>Begin by reviewing the code you were given. You should take the time to set a few breakpoints and step through the code until you feel you understand how it works.  You will probably want to pay special attention to the <code>manageTasks</code> function. If you are having a hard time understanding any part of it you could even paste the code into a generative AI for an explanation.</p>
<p>Once you have an idea of how the code works we can do a simple implementation of localStorage to get started.</p>
<ol>
<li>Add an input and button to the page requesting the user to enter their name.</li>
<li>When the button is clicked we should get the name entered and store it into localStorage with the key &quot;todo-user&quot;, then render the name onto the page.</li>
<li>Add a new function to our javascript file called <code>setUser</code>. This function should be called when the page loads, and should check to see if a user name has already been set in localStorage. If it finds one it should get it and render it to the page.</li>
</ol>
<blockquote>
<h3 id="notes" tabindex="-1">Notes <a class="direct-link" href="#notes" aria-hidden="true">#</a></h3>
<p>In this case we are storing and retrieving a simple string. We can simply use <code>localStorage.set(key, data)</code> and <code>localStorage.get(key)</code> to accomplish it.</p>
<p>To check to see if the name was successfully set in localStorage you can open the developer tools and look under the &quot;Application&quot; tab in Chrome or the &quot;Storage&quot; tab in Firefox and Safari. You could also clear out (delete) any localStorage key from here.</p>
<p>Refresh the browser page to see if the name is getting set correctly in the header.</p>
</blockquote>
<details>
<summary>Solution 1</summary>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[user name here]<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userNameButton<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Enter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/></span></span></code></pre>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"todo-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> name<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token keyword">function</span> <span class="token function">userNameHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"todo-user"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>document<br>  <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#userNameButton"</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> userNameHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// check to see if a user name has been set...if yes then set it in the header</span><br><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</details>
<h2 id="activity-2" tabindex="-1">Activity 2 <a class="direct-link" href="#activity-2" aria-hidden="true">#</a></h2>
<p>Now that we have seen a simple use of localStorage we are ready to move onto something a little more interesting. Storing the list of tasks.</p>
<p>Since we can only store strings in the value of a localStorage key, we have to convert any complex data structure like a list or object into a simple string. Luckily this is something that happens all the time in Javascript. We call this simplified string based form of a variable JSON: Javascript Object Notation. JSON is simply the string representation of a Javascript object.</p>
<p>Since we will be converting back and forth from a JSON string to a JS Object every time we get or set something to local storage we should start by making some functions that will simplify that for us.</p>
<ol>
<li>Create a function called <code>setLocalStorage(key, data)</code>. In this function take the data that was passed in and convert it to a string. (<code>JSON.stringify()</code>), then set that string in localStorage using the key provided.</li>
<li>Create a function called <code>getLocalStorage(key)</code>. In this function take the key provided and if the key exists in localStorage, convert the string back to a JS object using <code>JSON.parse()</code>, and return that object.</li>
<li>Use these two new functions to set the list of tasks to localStorage everytime a new task is added to the list, and when a task is updated or deleted.</li>
<li>When the page initially loads we should check to see if there are any tasks in localStorage, if there are we should update the <code>tasks</code> variable, and display them.</li>
<li>Because we now have several things that must be done when the page loads to get it ready, create a function called <code>init</code> that will take care of all the setup tasks.</li>
</ol>
<details>
<summary>Solution 2</summary>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">setLocalStorage</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">getLocalStorage</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> storedValue <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// check to see if something was found</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>storedValue<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>storedValue<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token comment">// if not return an empty array</span><br>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">taskTemplate</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;li </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">'class="strike"'</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>      &lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>task<span class="token punctuation">.</span>detail<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p><br>      &lt;div><br>        &lt;span data-action="delete">❎&lt;/span><br>        &lt;span data-action="complete">✅&lt;/span><br>      &lt;/div><br>    &lt;/li></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">renderTasks</span><span class="token punctuation">(</span><span class="token parameter">tasks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the list element from the DOM</span><br>  <span class="token keyword">const</span> listElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todoList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  listElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token comment">// loop through the tasks array. transform (map) each task object into the appropriate HTML to represent a to-do.</span><br>  <span class="token keyword">const</span> html <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>taskTemplate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  listElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">newTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// get the value entered into the #todo input</span><br>  <span class="token keyword">const</span> task <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token comment">// add it to our arrays tasks</span><br>  tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> detail<span class="token operator">:</span> task<span class="token punctuation">,</span> completed<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// SAVE the tasks array to local storage</span><br>  <span class="token function">setLocalStorage</span><span class="token punctuation">(</span><span class="token string">"todos"</span><span class="token punctuation">,</span> tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// render out the list</span><br>  <span class="token function">renderTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">removeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Notice how we are using taskElement instead of document as our starting point?</span><br>  <span class="token comment">// This will restrict our search to the element instead of searching the whole document.</span><br>  tasks <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">!=</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  taskElement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// UPDATE localStorage with the changes</span><br>  <span class="token function">setLocalStorage</span><span class="token punctuation">(</span><span class="token string">"todos"</span><span class="token punctuation">,</span> tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">completeTask</span><span class="token punctuation">(</span><span class="token parameter">taskElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> taskIndex <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=></span> task<span class="token punctuation">.</span>detail <span class="token operator">===</span> taskElement<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">=</span> tasks<span class="token punctuation">[</span>taskIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  taskElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"strike"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// UPDATE localStorage with the changes</span><br>  <span class="token function">setLocalStorage</span><span class="token punctuation">(</span><span class="token string">"todos"</span><span class="token punctuation">,</span> tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">manageTasks</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// did they click the delete or complete icon?</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> parent <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">"delete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">removeTask</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">completeTask</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token keyword">function</span> <span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"todo-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> name<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token keyword">function</span> <span class="token function">userNameHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"todo-user"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// see if there are any tasks in localStorage</span><br>  tasks <span class="token operator">=</span> <span class="token function">getLocalStorage</span><span class="token punctuation">(</span><span class="token string">"todos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// render  the initial list of tasks (if any) when the page loads</span><br>  <span class="token function">renderTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// check to see if a user name has been set...if yes then set it in the header</span><br>  <span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Add your event listeners here</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#submitTask"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> newTask<span class="token punctuation">)</span><span class="token punctuation">;</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#todoList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> manageTasks<span class="token punctuation">)</span><span class="token punctuation">;</span><br>document<br>  <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#userNameButton"</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> userNameHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br></code></pre>
</details>

</main>
    <footer>
      <p class="license">
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"/> </a><br/>This work is licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0
          International License</a>.</p>
    </footer><!-- Current page: /learning-modules/modules/js/localStorage/ponder1/ --></body>
</html>